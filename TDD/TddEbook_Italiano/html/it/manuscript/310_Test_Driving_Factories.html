<!DOCTYPE html>

<html lang="it" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Creazione di oggetti &#34;test-driving&#34; &#8212; Documentazione TDD 2025 </title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=12dfc556" />
    <script src="../_static/documentation_options.js?v=ad698211"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=45930005"></script>
    <link rel="index" title="Indice" href="../genindex.html" />
    <link rel="search" title="Cerca" href="../search.html" />
    <link rel="next" title="Creazione di oggetti &#34;test-driving&#34; -- una retrospettiva" href="320_Test_Driving_Factories_retrospective.html" />
    <link rel="prev" title="Il test-driving ai confini di input -- una retrospettiva" href="300_NeedDrivenRetrospective1.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="test-driving-object-creation">
<h1>Creazione di oggetti &quot;test-driving&quot;<a class="headerlink" href="#test-driving-object-creation" title="Link to this heading">¶</a></h1>
<p>In questo capitolo ci uniamo a Johnny e Benjamin mentre continuano il loro viaggio fuori dal TDD. In questo capitolo faranno del &quot;test-driving &quot; per una factory.</p>
<p><strong>Johnny:</strong> Qual è il prossimo elemento della nostra lista dei TODO?</p>
<p><strong>Benjamin:</strong> Ci sono due istanze di <code class="docutils literal notranslate"><span class="pre">NotImplementedException</span></code>, entrambe provenienti da factory che abbiamo scoperto durante l'implementazione dell'ultimo Statement.</p>
<p>La prima factory serve per creare istanze di <code class="docutils literal notranslate"><span class="pre">ReservationInProgress</span></code> -- ricordi? Gli hai dato un nome strano apposta. Guarda:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">TodoReservationInProgressFactory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ReservationInProgressFactory</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">ReservationInProgress</span><span class="w"> </span><span class="nf">FreshInstance</span><span class="p">()</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">NotImplementedException</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Johnny:</strong> Oh, sì, quello...</p>
<p><strong>Benjamin:</strong> e la seconda factory serve per creare comandi -- si chiama <code class="docutils literal notranslate"><span class="pre">TicketOfficeCommandFactory</span></code>:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">TicketOfficeCommandFactory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">CommandFactory</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">ReservationCommand</span><span class="w"> </span><span class="nf">CreateNewReservationCommand</span><span class="p">(</span>
<span class="w">    </span><span class="n">ReservationRequestDto</span><span class="w"> </span><span class="n">requestDto</span><span class="p">,</span>
<span class="w">    </span><span class="n">ReservationInProgress</span><span class="w"> </span><span class="n">reservationInProgress</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">NotImplementedException</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Johnny:</strong> Facciamolo.</p>
<p><strong>Benjamin:</strong> Perché questo?</p>
<p><strong>Johnny</strong>: Nessun motivo in particolare. Voglio solo approfondire la logica del dominio il prima possibile.</p>
<p><strong>Benjamin</strong>: Giusto. Non abbiamo una Specifica per questa classe, quindi creiamone una.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">TicketOfficeCommandFactorySpecification</span>
<span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
<p><strong>Johnny</strong>: Continua, penso che sarai in grado di scrivere questo Statement senza il mio aiuto.</p>
<p><strong>Benjamin</strong>: L'inizio sembra facile. Aggiungerò un nuovo Statement  che non so ancora come chiamerò.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">TicketOfficeCommandFactorySpecification</span>
<span class="p">{</span>
<span class="w"> </span><span class="na">[Fact]</span>
<span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ShouldCreateXXXXXXXXX</span><span class="p">()</span><span class="w"> </span><span class="c1">//TODO rename</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">True</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ora, come mi hai detto prima, so già quale classe sto descrivendo -- è <code class="docutils literal notranslate"><span class="pre">TicketOfficeCommandFactory</span></code>. Implementa un'interfaccia che ho scoperto nello Statement precedente, quindi ha già un metodo: <code class="docutils literal notranslate"><span class="pre">CreateNewReservationCommand</span></code>. Quindi nello Statementcreerò semplicemente un'istanza della classe e chiamerò il metodo, perché &quot;why not&quot;?</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">TicketOfficeCommandFactorySpecification</span>
<span class="p">{</span>
<span class="w"> </span><span class="na">[Fact]</span>
<span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ShouldCreateXXXXXXXXX</span><span class="p">()</span><span class="w"> </span><span class="c1">//TODO rename</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">//GIVEN</span>
<span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TicketOfficeCommandFactory</span><span class="p">();</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">//WHEN</span>
<span class="w">  </span><span class="n">factory</span><span class="p">.</span><span class="n">CreateNewReservationCommand</span><span class="p">();</span>

<span class="w">  </span><span class="c1">//THEN</span>
<span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">True</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Questo non viene compilato. Per scoprire perché, guardo la firma del metodo <code class="docutils literal notranslate"><span class="pre">CreateNewReservationCommand</span></code> e vedo che non solo restituisce un comando, ma accetta anche due argomenti. Devo tenerne conto nello Statement:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">TicketOfficeCommandFactorySpecification</span>
<span class="p">{</span>
<span class="w"> </span><span class="na">[Fact]</span>
<span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ShouldCreateXXXXXXXXX</span><span class="p">()</span><span class="w"> </span><span class="c1">//TODO rename</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">//GIVEN</span>
<span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TicketOfficeCommandFactory</span><span class="p">();</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">//WHEN</span>
<span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factory</span><span class="p">.</span><span class="n">CreateNewReservationCommand</span><span class="p">(</span>
<span class="w">    </span><span class="n">Any</span><span class="p">.</span><span class="n">Instance</span><span class="o">&lt;</span><span class="n">ReservationRequestDto</span><span class="o">&gt;</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Any</span><span class="p">.</span><span class="n">Instance</span><span class="o">&lt;</span><span class="n">ReservationInProgress</span><span class="o">&gt;</span><span class="p">());</span>

<span class="w">  </span><span class="c1">//THEN</span>
<span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">True</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ho utilizzato <code class="docutils literal notranslate"><span class="pre">Any.Instance&lt;&gt;()</span></code> per generare istanze anonime sia di DTO che di <code class="docutils literal notranslate"><span class="pre">ReservationInProgress</span></code>.</p>
<p><strong>Johnny</strong>: Questo è esattamente quello che farei. Li assegnerei alle variabili solo se avessi bisogno di usarli da qualche altra parte nello Statement.</p>
<p><strong>Benjamin</strong>: Lo Statement viene compilato. Ho ancora l'asserzione da scrivere. Cosa dovrei affermare esattamente? Il comando che ricevo dalla factory ha solo un metodo <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Execute()</span></code>. Tutto il resto è nascosto.</p>
<p><strong>Johnny</strong>: In genere, non c'è molto che possiamo specificare sugli oggetti creati dalle factory. In questo caso possiamo solo indicare il tipo atteso del comando.</p>
<p><strong>Benjamin</strong>: Aspetta, non c'è già questo nella firma della factory? Osservando il metodo di creazione, posso già vedere che il tipo restituito è <code class="docutils literal notranslate"><span class="pre">ReservationCommand</span></code>... aspetta!</p>
<p><strong>Johnny</strong>: Pensavo l'avresti notato. <code class="docutils literal notranslate"><span class="pre">ReservationCommand</span></code> è un'interfaccia. Ma un oggetto deve avere un tipo concreto e questo tipo è ciò che dobbiamo specificare in questo Statement. Non abbiamo ancora questo tipo. Siamo sul punto di scoprirlo e, quando lo faremo, alcuni nuovi elementi verranno aggiunti alla nostra lista dei TODO.</p>
<p><strong>Benjamin</strong>: Chiamerò la classe <code class="docutils literal notranslate"><span class="pre">NewReservationCommand</span></code> e modificherò il mio Statement per asserire il tipo. Inoltre, penso di sapere ora come chiamare questo Statement:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">TicketOfficeCommandFactorySpecification</span>
<span class="p">{</span>
<span class="w"> </span><span class="na">[Fact]</span>
<span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ShouldCreateNewReservationCommandWhenRequested</span><span class="p">()</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">//GIVEN</span>
<span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TicketOfficeCommandFactory</span><span class="p">();</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">//WHEN</span>
<span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factory</span><span class="p">.</span><span class="n">CreateNewReservationCommand</span><span class="p">(</span>
<span class="w">    </span><span class="n">Any</span><span class="p">.</span><span class="n">Instance</span><span class="o">&lt;</span><span class="n">ReservationRequestDto</span><span class="o">&gt;</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Any</span><span class="p">.</span><span class="n">Instance</span><span class="o">&lt;</span><span class="n">ReservationInProgress</span><span class="o">&gt;</span><span class="p">());</span>

<span class="w">  </span><span class="c1">//THEN</span>
<span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">IsType</span><span class="o">&lt;</span><span class="n">NewReservationCommand</span><span class="o">&gt;</span><span class="p">(</span><span class="n">command</span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Johnny</strong>: Ora vediamo -- la dichiarazione sembra completa. L'hai fatto quasi senza il mio aiuto.</p>
<p><strong>Benjamin</strong>: Grazie. Il codice, però, non viene compilato. Il tipo <code class="docutils literal notranslate"><span class="pre">NewReservationCommand</span></code> non esiste.</p>
<p><strong>Johnny</strong>: Allora introduciamolo:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">NewReservationCommand</span>
<span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
<p><strong>Benjamin</strong>: Non dovrebbe implementare l'interfaccia <code class="docutils literal notranslate"><span class="pre">ReservationCommand</span></code>?</p>
<p><strong>Johnny</strong>: Non abbiamo bisogno di farlo ancora. Il compilatore si è lamentato solo del fatto che il tipo non esiste.</p>
<p><strong>Benjamin</strong>: Il codice viene compilato ora, ma lo Statement è falso perché il metodo <code class="docutils literal notranslate"><span class="pre">CreateNewReservationCommand</span></code> lancia una <code class="docutils literal notranslate"><span class="pre">NotImplementedException</span></code>:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="n">ReservationCommand</span><span class="w"> </span><span class="nf">CreateNewReservationCommand</span><span class="p">(</span>
<span class="w">    </span><span class="n">ReservationRequestDto</span><span class="w"> </span><span class="n">requestDto</span><span class="p">,</span>
<span class="w">    </span><span class="n">ReservationInProgress</span><span class="w"> </span><span class="n">reservationInProgress</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">NotImplementedException</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p><strong>Johnny</strong>: Ricordi cosa ti ho detto l'ultima volta?</p>
<p><strong>Benjamin</strong>: Sì, lo Statement deve essere falso per la ragione giusta.</p>
<p><strong>Johnny</strong>: Esattamente. <code class="docutils literal notranslate"><span class="pre">NotImplementedException</span></code> non è il motivo giusto. Cambierò il codice sopra per restituire null:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="n">ReservationCommand</span><span class="w"> </span><span class="nf">CreateNewReservationCommand</span><span class="p">(</span>
<span class="w">    </span><span class="n">ReservationRequestDto</span><span class="w"> </span><span class="n">requestDto</span><span class="p">,</span>
<span class="w">    </span><span class="n">ReservationInProgress</span><span class="w"> </span><span class="n">reservationInProgress</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>Ora lo Statement è falso perché questa asserzione fallisce:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Assert</span><span class="p">.</span><span class="n">IsType</span><span class="o">&lt;</span><span class="n">NewReservationCommand</span><span class="o">&gt;</span><span class="p">(</span><span class="n">command</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Benjamin</strong>: si lamenta che il comando è null.</p>
<p><strong>Johnny</strong>: Quindi è arrivato il momento giusto per inserire l'implementazione corretta:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="n">ReservationCommand</span><span class="w"> </span><span class="nf">CreateNewReservationCommand</span><span class="p">(</span>
<span class="w">    </span><span class="n">ReservationRequestDto</span><span class="w"> </span><span class="n">requestDto</span><span class="p">,</span>
<span class="w">    </span><span class="n">ReservationInProgress</span><span class="w"> </span><span class="n">reservationInProgress</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">NewReservationCommand</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p><strong>Benjamin</strong>: Ma questo non viene compilato -- <code class="docutils literal notranslate"><span class="pre">NewReservationCommand</span></code> non implementa l'interfaccia <code class="docutils literal notranslate"><span class="pre">ReservationCommand</span></code>, te l'ho detto prima.</p>
<p><strong>Johnny</strong>: e il compilatore ci obbliga a implementare questa interfaccia:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">NewReservationCommand</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ReservationCommand</span>
<span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Il codice continua a non essere compilabile, perché l'interfaccia ha un metodo <code class="docutils literal notranslate"><span class="pre">Execute()</span></code> che dobbiamo implementare in <code class="docutils literal notranslate"><span class="pre">NewReservationCommand</span></code>. Qualsiasi implementazione andrà bene poiché la logica di questo metodo non rientra nello &quot;scope&quot; dello Statement corrente. Dobbiamo solo accontentare il compilatore. Il nostro IDE può generare per noi il corpo del metodo di default. Questo dovrebbe fare:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">NewReservationCommand</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ReservationCommand</span>
<span class="p">{</span>
<span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Execute</span><span class="p">()</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">NotImplementedException</span><span class="p">();</span>
<span class="w"> </span><span class="p">}</span><span class="w"> </span>
<span class="p">}</span>
</pre></div>
</div>
<p>La <code class="docutils literal notranslate"><span class="pre">NotImplementedException</span></code> verrà aggiunta alla nostra lista TODO e specificheremo il suo comportamento con un'altro Statement in seguito.</p>
<p><strong>Benjamin</strong>: Il nostro Statement corrente sembra essere &quot;true&quot; adesso. Qualcosa mi dà fastidio, però. Che dire degli argomenti che stiamo passando al metodo <code class="docutils literal notranslate"><span class="pre">CreateNewReservationCommand</span></code>? Ce ne sono due:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="n">ReservationCommand</span><span class="w"> </span><span class="nf">CreateNewReservationCommand</span><span class="p">(</span>
<span class="w">    </span><span class="n">ReservationRequestDto</span><span class="w"> </span><span class="n">requestDto</span><span class="p">,</span><span class="w"> </span><span class="c1">//first argument</span>
<span class="w">    </span><span class="n">ReservationInProgress</span><span class="w"> </span><span class="n">reservationInProgress</span><span class="p">)</span><span class="w"> </span><span class="c1">//second argument</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">NewReservationCommand</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>e sono entrambi inutilizzati. Come mai?</p>
<p><strong>Johnny</strong>: Avremmo potuto usarli e passarli al comando. A volte lo faccio anche se lo Statement non dipende da questo, quindi non c'è pressione. Ho scelto di non farlo questa volta per mostrarti che dovremo comunque passarli quando specifichiamo i comportamenti del nostro comando.</p>
<p><strong>Benjamin</strong>: diciamo che hai ragione e quando specifichiamo il comportamento del comando, dovremo modificare la factory per passare questi due, ad es. come questo:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="n">ReservationCommand</span><span class="w"> </span><span class="nf">CreateNewReservationCommand</span><span class="p">(</span>
<span class="w">    </span><span class="n">ReservationRequestDto</span><span class="w"> </span><span class="n">requestDto</span><span class="p">,</span><span class="w"> </span><span class="c1">//first argument</span>
<span class="w">    </span><span class="n">ReservationInProgress</span><span class="w"> </span><span class="n">reservationInProgress</span><span class="p">)</span><span class="w"> </span><span class="c1">//second argument</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">NewReservationCommand</span><span class="p">(</span><span class="n">requestDto</span><span class="p">,</span><span class="w"> </span><span class="n">reservationInProgress</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>ma nessuno Statement dice quali valori dovrebbero essere usati, quindi potrò anche imbrogliare scrivendo qualcosa come:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="n">ReservationCommand</span><span class="w"> </span><span class="nf">CreateNewReservationCommand</span><span class="p">(</span>
<span class="w">    </span><span class="n">ReservationRequestDto</span><span class="w"> </span><span class="n">requestDto</span><span class="p">,</span><span class="w"> </span><span class="c1">//first argument</span>
<span class="w">    </span><span class="n">ReservationInProgress</span><span class="w"> </span><span class="n">reservationInProgress</span><span class="p">)</span><span class="w"> </span><span class="c1">//second argument</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">NewReservationCommand</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>e tutti gli Statement saranno comunque &quot;true&quot;.</p>
<p><strong>Johnny</strong>: Esatto. Sebbene esistano alcune tecniche per specificarlo a livello di unità, preferirei fare affidamento su Statement di livello superiore per garantire il passaggio dei valori corretti. Ti mostrerò come farlo un'altra volta.</p>
<p><strong>Benjamin</strong>: Grazie, sembra che dovrò solo aspettare.</p>
<p><strong>Johnny</strong>: Comunque sembra che abbiamo finito con questo Statement, quindi facciamo una breve pausa.</p>
<p><strong>Benjamin</strong>: Certo!</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">TDD</a></h1>








<h3>Navigazione</h3>
<p class="caption" role="heading"><span class="caption-text">Contenuti:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Cover.html">Titolo</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Premessa</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="010_Dedication.html">Premessa</a></li>
<li class="toctree-l1"><a class="reference internal" href="010_Dedication.html#dedications">Dediche</a></li>
<li class="toctree-l1"><a class="reference internal" href="015_Thanks.html">Grazie!</a></li>
<li class="toctree-l1"><a class="reference internal" href="017_CodeExamples.html">I codici di esempio</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parte 1:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="020_Part1Marker.html">Parte 1: Solo le nozioni di base</a></li>
<li class="toctree-l1"><a class="reference internal" href="030_Motivations.html">Motivazione: il primo passo per imparare il TDD</a></li>
<li class="toctree-l1"><a class="reference internal" href="040_Three_Essential_Tools.html"><span class="xref myst">Gli strumenti essenziali</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="050_Its_Not_a_Test.html">Non è (solo) un test</a></li>
<li class="toctree-l1"><a class="reference internal" href="060_Statement_First_Programming.html">La programmazione Statement-first</a></li>
<li class="toctree-l1"><a class="reference internal" href="070_Practicing_What_We_Already_Learned.html">Mettere in pratica ciò che abbiamo già imparato</a></li>
<li class="toctree-l1"><a class="reference internal" href="080_Sorting_out_the_bits.html">Facciamo un po' d'ordine</a></li>
<li class="toctree-l1"><a class="reference internal" href="090_How_to_start.html">Come iniziare?</a></li>
<li class="toctree-l1"><a class="reference internal" href="100_Analysis_In_TDD.html">In che modo il TDD riguarda l'analisi e cosa significa &quot;GIVEN-WHEN-THEN&quot;?</a></li>
<li class="toctree-l1"><a class="reference internal" href="110_What_is_the_scope_of_a_Statement_in_TDD.html">Qual è lo scopo di uno Statement a livello di unità in TDD?</a></li>
<li class="toctree-l1"><a class="reference internal" href="120_Constrained_Non_Determinism.html">Sviluppare uno stile TDD e Non-Determinismo Vincolato</a></li>
<li class="toctree-l1"><a class="reference internal" href="130_Boundaries.html">Specificare i confini e le condizioni funzionali</a></li>
<li class="toctree-l1"><a class="reference internal" href="140_Triangulation.html">Guidare l'implementazione dalle Specifiche</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parte 2:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="150_Part2Marker.html">Parte 2: Il Mondo Object-Oriented</a></li>
<li class="toctree-l1"><a class="reference internal" href="160_Composable_Design.html">La Componibilità degli Oggetti</a></li>
<li class="toctree-l1"><a class="reference internal" href="170_TellDoNotAsk.html"><span class="xref myst">Raccontare, non chiedere</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="180_Web_of_objects_explained.html">La necessità degli oggetti mock</a></li>
<li class="toctree-l1"><a class="reference internal" href="190_Why_do_we_need_composability.html">Perché abbiamo bisogno della componibilità?</a></li>
<li class="toctree-l1"><a class="reference internal" href="200_What_does_it_mean_to_compose_objects.html">Reti, messaggi e protocolli</a></li>
<li class="toctree-l1"><a class="reference internal" href="210_How_are_objects_composed.html">Comporre una rete di oggetti</a></li>
<li class="toctree-l1"><a class="reference internal" href="211_When_are_objects_composed.html">Quando vengono composti gli oggetti?</a></li>
<li class="toctree-l1"><a class="reference internal" href="212_How_are_the_connections_made.html">Come fa un mittente ad ottenere un riferimento a un destinatario (cioè come vengono stabilite le connessioni)?</a></li>
<li class="toctree-l1"><a class="reference internal" href="213_Where_are_objects_composed.html">Dove vengono composti gli oggetti?</a></li>
<li class="toctree-l1"><a class="reference internal" href="220_Designing_for_composabiity_interfaces.html">Interfacce</a></li>
<li class="toctree-l1"><a class="reference internal" href="230_Designing_for_composabiity_protocols.html">Protocolli</a></li>
<li class="toctree-l1"><a class="reference internal" href="235_Classes.html">Le Classi</a></li>
<li class="toctree-l1"><a class="reference internal" href="240_Refactoring_Object_Composition.html">Composizione di Oggetti come Linguaggio</a></li>
<li class="toctree-l1"><a class="reference internal" href="250_Value_Objects.html">Gli <em>Oggetti Valore</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="255_Value_Objects_properties.html">Anatomia del <em>oggetto valore</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="257_Value%20objects_general_topics.html">Aspetti del design degli <em>oggetti valore</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="259_DataTransferObjects.html">Oggetti di Trasferimento Dati</a></li>
<li class="toctree-l1"><a class="reference internal" href="259_DataTransferObjects.html#decoupling-by-abstracting-behavior">Disaccoppiamento mediante l'astrazione del comportamento</a></li>
<li class="toctree-l1"><a class="reference internal" href="259_DataTransferObjects.html#decoupling-by-abstracting-data">Disaccoppiamento mediante l'astrazione dei dati</a></li>
<li class="toctree-l1"><a class="reference internal" href="259_DataTransferObjects.html#use-both">Usare entrambi</a></li>
<li class="toctree-l1"><a class="reference internal" href="259_DataTransferObjects.html#dto-as-data-centric-decoupling-mechanism">DTO come meccanismo di disaccoppiamento incentrato sui dati</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parte 3:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="260_Part3Marker.html">Parte 3: TDD nel Mondo Object-Oriented</a></li>
<li class="toctree-l1"><a class="reference internal" href="270_Mock_Objects.html">Oggetti Mock come strumento di test</a></li>
<li class="toctree-l1"><a class="reference internal" href="280_Start_with_a_failing_test_mocks.html">Test-first  [<em>Testare prima</em>] utilizzando oggetti mock</a></li>
<li class="toctree-l1"><a class="reference internal" href="290_NeedDrivenDevelopment.html">Il test-driving ai confini di input</a></li>
<li class="toctree-l1"><a class="reference internal" href="300_NeedDrivenRetrospective1.html">Il test-driving ai confini di input -- una retrospettiva</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Creazione di oggetti &quot;test-driving&quot;</a></li>
<li class="toctree-l1"><a class="reference internal" href="320_Test_Driving_Factories_retrospective.html">Creazione di oggetti &quot;test-driving&quot; -- una retrospettiva</a></li>
<li class="toctree-l1"><a class="reference internal" href="330_Test-Driving_Command.html">Logica dell'applicazione test-driving</a></li>
<li class="toctree-l1"><a class="reference internal" href="340_Test-Driving_Value_object.html"><em>Oggetti valore</em> nel test-driving</a></li>
<li class="toctree-l1"><a class="reference internal" href="350_Web_of_objects_boundaries.html">Raggiungere la rete dei confini degli oggetti</a></li>
<li class="toctree-l1"><a class="reference internal" href="360_Internals.html">Cosa c'è dentro l'oggetto?</a></li>
<li class="toctree-l1"><a class="reference internal" href="370_Design_smells.html">Odori del design visibile nella Specifica</a></li>
<li class="toctree-l1"><a class="reference internal" href="End.html">QUESTO È TUTTO QUELLO CHE HO PER ORA. QUELLO CHE SEGUE È MATERIALE GREZZO, NON ORDINATO, NON ANCORA PRONTO PER ESSERE CONSUMATO COME PARTE DI QUESTO TUTORIAL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parte 5:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="400_Dealing_with_3rd_party.html">Mock di oggetti come strumento di progettazione</a></li>
<li class="toctree-l1"><a class="reference internal" href="400_Dealing_with_3rd_party.html#guidance-of-test-smells">Guidaa ai test smells [<em>puzzolenti</em>]</a></li>
<li class="toctree-l1"><a class="reference internal" href="400_Dealing_with_3rd_party.html#revisiting-topics-from-chapter-1">Rivedere gli argomenti del capitolo 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="400_Dealing_with_3rd_party.html#maintainable-mock-based-statements">Statement manutenibili basate su mock</a></li>
<li class="toctree-l1"><a class="reference internal" href="400_Dealing_with_3rd_party.html#refactoring-mock-code">Refactoring del codice mock</a></li>
<li class="toctree-l1"><a class="reference internal" href="400_Dealing_with_3rd_party.html#part-4-application-architecture">Parte 4: Architettura dell'applicazione</a></li>
<li class="toctree-l1"><a class="reference internal" href="400_Dealing_with_3rd_party.html#on-stable-architectural-boundaries">Sui confini stabili/architetturali</a></li>
<li class="toctree-l1"><a class="reference internal" href="400_Dealing_with_3rd_party.html#ports-and-adapters">[Port] e adapter</a></li>
<li class="toctree-l1"><a class="reference internal" href="400_Dealing_with_3rd_party.html#what-goes-into-application">Cosa entra in applicazione?</a></li>
<li class="toctree-l1"><a class="reference internal" href="400_Dealing_with_3rd_party.html#what-goes-into-ports">Cosa va nei [port]?</a></li>
<li class="toctree-l1"><a class="reference internal" href="400_Dealing_with_3rd_party.html#part-5-tdd-on-application-architecture-level">Parte 5: TDD a livello di architettura applicativa</a></li>
<li class="toctree-l1"><a class="reference internal" href="400_Dealing_with_3rd_party.html#designing-automation-layer">Progettazione del layer di automazione</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parte 9:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="990_Further_reading.html"><span class="xref myst">Ulteriori Letture</span></a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="300_NeedDrivenRetrospective1.html" title="capitolo precedente">Il test-driving ai confini di input -- una retrospettiva</a></li>
      <li>Next: <a href="320_Test_Driving_Factories_retrospective.html" title="capitolo successivo">Creazione di oggetti &quot;test-driving&quot; -- una retrospettiva</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Ricerca veloce</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Vai" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Grzegorz GaÅ‚Ä™zowski.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/manuscript/310_Test_Driving_Factories.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>